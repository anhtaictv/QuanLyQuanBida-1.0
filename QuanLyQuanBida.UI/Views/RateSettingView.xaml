<Window x:Class="QuanLyQuanBida.UI.Views.RateSettingView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:QuanLyQuanBida.UI.Views"
        mc:Ignorable="d"
        Title="Cài đặt Giá giờ" Height="500" Width="800"
        WindowStartupLocation="CenterScreen">
	<Grid Margin="10">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="300"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<Border Grid.Column="0" Padding="10" BorderThickness="1" BorderBrush="LightGray" Margin="0,0,10,0">
			<StackPanel DataContext="{Binding RateForm}">
				<TextBlock Text="Thông tin Giá giờ" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>

				<Label Content="Tên giá:"/>
				<TextBox Text="{Binding Name}" Height="25" Margin="0,0,0,10"/>

				<Label Content="Giá mỗi giờ (VNĐ):"/>
				<TextBox Text="{Binding PricePerHour}" Height="25" Margin="0,0,0,10"/>

				<Label Content="Giờ bắt đầu (HH:mm):"/>
				<TextBox Text="{Binding StartTimeWindow, StringFormat='HH:mm'}" Height="25" Margin="0,0,0,10"/>

				<Label Content="Giờ kết thúc (HH:mm):"/>
				<TextBox Text="{Binding EndTimeWindow, StringFormat='HH:mm'}" Height="25" Margin="0,0,0,10"/>

				<CheckBox Content="Áp dụng cuối tuần" IsChecked="{Binding IsWeekendRate}" Margin="0,10,0,5"/>
				<CheckBox Content="Là giá mặc định" IsChecked="{Binding IsDefault}" Margin="0,5,0,10"/>

				<StackPanel Orientation="Horizontal" Margin="0,15,0,0">
					<Button Content="Lưu" Width="80" Margin="0,0,5,0" Command="{Binding DataContext.SaveRateCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
					<Button Content="Hủy" Width="80" Command="{Binding DataContext.AddNewCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
				</StackPanel>
			</StackPanel>
		</Border>

		<Grid Grid.Column="1">
			<DataGrid ItemsSource="{Binding Rates}" SelectedItem="{Binding SelectedRate}"
                      AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False">
				<DataGrid.Columns>
					<DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="40"/>
					<DataGridTextColumn Header="Tên giá" Binding="{Binding Name}" Width="*"/>
					<DataGridTextColumn Header="Giá/giờ" Binding="{Binding PricePerHour, StringFormat='{}{0:N0}'}" Width="80"/>
					<DataGridTextColumn Header="Bắt đầu" Binding="{Binding StartTimeWindow}" Width="70"/>
					<DataGridTextColumn Header="Kết thúc" Binding="{Binding EndTimeWindow}" Width="70"/>
					<DataGridCheckBoxColumn Header="Cuối tuần" Binding="{Binding IsWeekendRate}" Width="70"/>
					<DataGridTemplateColumn Header="Thao tác" Width="120">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<Button Content="Sửa" Width="50" Margin="5"
                                            Command="{Binding DataContext.EditRateCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
									<Button Content="Xóa" Width="50" Margin="5"
                                            Command="{Binding DataContext.DeleteRateCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
								</StackPanel>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
				</DataGrid.Columns>
			</DataGrid>
		</Grid>
	</Grid>
</Window>